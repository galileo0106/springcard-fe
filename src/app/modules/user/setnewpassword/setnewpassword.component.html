<div class="container">
  <mat-card *ngIf="!isReseted" >
    <mat-card-header>
      <mat-card-title>
        <div mat-card-avatar><i class="material-icons">edit</i></div>
        <h1 i18n>Password Reset</h1>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content class="before_reset">
      <form [formGroup]="setNewPasswordForm" (ngSubmit)="askToSetNewPassword()">
        <mat-form-field class="full-width">
          <mat-label i18n>Email</mat-label>
          <input matInput type="email" name="email" formControlName="email" required />
          <mat-error>
            <val-errors controlName="email"></val-errors>
          </mat-error>
        </mat-form-field>
  
        <mat-form-field class="full-width">
          <mat-label i18n>Token you received in your emails</mat-label>
          <input matInput type="text" name="token" formControlName="token" required />
          <mat-error>
            <val-errors controlName="token"></val-errors>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="full-width">
          <mat-label i18n>New password</mat-label>
          <input matInput type="password" name="password" formControlName="password" required />
          <mat-error>
            <val-errors controlName="password"></val-errors>
          </mat-error>
        </mat-form-field>
  
        <mat-form-field class="full-width">
          <mat-label i18n>Confirm new password</mat-label>
          <input matInput type="password" name="confirmpassword" formControlName="confirmpassword" required />
          <mat-error>
            <val-errors controlName="password"></val-errors>
          </mat-error>
        </mat-form-field>

        <button mat-raised-button class="request_btn" type="submit" color="primary" [disabled]="setNewPasswordForm.invalid">
          <mat-icon *ngIf="isReseting"><mat-progress-spinner diameter="20" mode="indeterminate"></mat-progress-spinner></mat-icon>
          <ng-container i18n>Set new password</ng-container>
        </button>
        <button mat-stroked-button class="back_btn" (click)="goBackToLogin()" i18n>Back to login</button>
      </form>
    </mat-card-content>
  </mat-card>
  <mat-card *ngIf="isReseted">
    <mat-card-header>
      <mat-card-title>
        <div mat-card-avatar><i class="material-icons">edit</i></div>
        <h1 i18n>Password changed</h1>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content class="after_reset">
      <p i18n>Your password has been successfully reset</p>
      <p i18n>Please <a class="action_btn">get connected</a> using your new password.
      </p>
      <div class="additional_actions">
        <button mat-stroked-button class="back_btn" (click)="goBackToLogin()" i18n>Back to login</button>
      </div>
    </mat-card-content>
  </mat-card>
</div>
